<!DOCTYPE html>
<html>
      <head>
            <meta charset="UTF-8">
            <title>BOX</title>
            <script src="js/jquery-3.2.1.min.js"></script>
      </head>
      <body>
      	<div class="input">
      		
      	</div>
      	<div style="background-color: gray;width: 200px;height: 200px;"></div>
                
      </body>
      <script>
            window.onload = main;

            function main() {
            	console.info("XXXXXXXXXXXXXXXX");

            	add_input_drop_down_box($(".input"), ['aaa','bbb','ccc']);

            	function add_input_drop_down_box( obj, data ) {
            		var input = $("<input type='text' name=''>");
            		$(obj).append(input);
            		input = $(obj).children("input");

            		var dropbox = $("<div></div>").attr("class","drop-down")
            			.css("display", "none").css("position", "fixed");
            		dropbox.css("width", input.outerWidth()+"px");
            		
            		dropbox.css("background-color", "#C3C5C5");
            		input.after(dropbox);
            		dropbox = input.next(".drop-down");

            		for(var i=0; i<data.length; i++) {
            			var tmp =$("<div></div>").text(data[i]);
            			dropbox.append(tmp);
            		}

            		input.focus(function(event) {
            			//slideToggle( options )
            			$(this).next(".drop-down").slideDown(100, function() {
            				
            			});
            		});

            		dropbox.children().click(function(event) {
            			/* Act on the event */
            			$(this).parent().find('.selected').removeClass('selected');
            			$(this).addClass('selected');
            			$(this).parent().slideUp(100);
            			$(this).parent().prev('input').val($(this).text());
            		});

            		$(input).blur(function(event) {
            			/* Act on the event */
            			console.info($(this).next(".drop-down").is(':focus'));
            			if ($(this).next(".drop-down").is(':focus')){

            			}else{
            				$(this).next(".drop-down").slideUp(100)
            			}
            			
            		});

            		$(document).on("mouseup scroll", function(ev) {
            			console.info(ev);
            		});


            	}
            }
      </script>
</html>